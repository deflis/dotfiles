# oh-my-posh --config private_dot_config\powershell\theme.yaml --debug --shell uni
# night-owlベースだけど、もう跡形もない
# https://ohmyposh.dev/docs/config-overview
$schema: https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json
palette:
  # [Hue 360](https://hue360.herokuapp.com/) で作成
  white: "#d6deeb"
  black: "#111111"
  blue: "#3261AB"
  cian: "#007FB1"
  green: "#23AC0E"
  lime: "#A4C520"
  yellow: "#FFE600"
  yelloworange: "#EDAD0B"
  orange: "#DA5019"
  red: "#C7243A"
  magenta: "#BF1E56"
  light-blue: "#D5E0F1"
  light-cian: "#CAE7F2"
  light-green: "#D1F1CC"
  light-lime: "#EEF5D3"
  light-yellow: "#FFFBD5"
  light-yelloworange: "#FCF1D3"
  light-orange: "#F9DFD5"
  light-red: "#F6D4D8"
  light-magenta: "#F4D2DE"
  dark-blue: "#142744"
  dark-cian: "#003347"
  dark-green: "#0E4506"
  dark-lime: "#565A07"
  dark-yellow: "#665C00"
  dark-yelloworange: "#625002"
  dark-orange: "#5F4504"
  dark-red: "#500E17"
  dark-magenta: "#4C0C23"
blocks:
  - alignment: left
    type: prompt
    segments:
      - type: os
        background: "p:black"
        background_templates:
          - '{{ if eq .OS "windows" }}p:blue{{ end }}'
          - '{{ if eq .OS "ubuntu" }}p:orange{{ end }}'
          - '{{ if eq .OS "centos" }}p:yelloworange{{ end }}'
        foreground: "p:white"
        foreground_templates:
          - '{{ if eq .OS "windows" }}p:white{{ end }}'
          - '{{ if eq .OS "ubuntu" }}p:white{{ end }}'
          - '{{ if eq .OS "centos" }}p:black{{ end }}'
        properties:
          template: '{{ if eq .OS "windows" }}{{ else }}{{ .Icon }}{{ end }} {{ if .WSL }} {{ end }}'
        style: powerline
      - type: session
        background: "p:black"
        background_templates:
          - '{{ if eq .OS "windows" }}p:blue{{ end }}'
          - '{{ if eq .OS "ubuntu" }}p:orange{{ end }}'
          - '{{ if eq .OS "centos" }}p:yelloworange{{ end }}'
        foreground: "p:white"
        foreground_templates:
          - '{{ if eq .OS "windows" }}p:white{{ end }}'
          - '{{ if eq .OS "ubuntu" }}p:white{{ end }}'
          - '{{ if eq .OS "centos" }}p:black{{ end }}'
        properties:
          template: "{{ if .SSHSession }}{{ .HostName }}{{ end }}"
        style: powerline
      - type: path
        background: "p:light-blue"
        foreground: "p:dark-blue"
        properties:
          folder_separator_icon: "<p:blue>  </>"
          home_icon: "~"
          style: agnoster_full
          template: " {{ .Path }} "
        style: powerline
        powerline_symbol: ""
  - alignment: right
    type: prompt
    segments:
      - type: git
        background: "p:green"
        background_templates:
          - "{{ if or (.Working.Changed) (.Staging.Changed) }}p:lime{{ end }}"
          - "{{ if and (gt .Ahead 0) (gt .Behind 0) }}p:magenta{{ end }}"
          - "{{ if gt .Ahead 0 }}p:yelloworange{{ end }}"
          - "{{ if gt .Behind 0 }}p:cian{{ end }}"
        foreground: "p:black"
        foreground_templates:
          - "{{ if or (.Working.Changed) (.Staging.Changed) }}p:black{{ end }}"
          - "{{ if and (gt .Ahead 0) (gt .Behind 0) }}p:white{{  }}"
          - "{{ if gt .Ahead 0 }}p:black{{ end }}"
          - "{{ if gt .Behind 0 }}p:white{{ end }}"
        properties:
          branch_icon: " "
          fetch_stash_count: true
          fetch_status: true
          fetch_upstream_icon: true
          fetch_worktree_count: true
          template: "\
            {{ .UpstreamIcon }}\
            {{ .HEAD }}\
            {{ .BranchStatus }}\
            {{ if .Working.Changed }}  {{ .Working.String }}{{ end }}\
            {{ if and (.Working.Changed) (.Staging.Changed) }} |{{ end }}\
            {{ if .Staging.Changed }}  {{ .Staging.String }}{{ end }}\
            {{ if gt .StashCount 0 }}  {{ .StashCount }}{{ end }}\
            "
        style: powerline
        powerline_symbol: 
        invert_powerline: true
      - type: battery
        background: "#8f43f3"
        foreground: "#ffffff"
        properties:
          discharging_icon: " "
          charging_icon: " "
          charged_icon: " "
          template: "{{ if not .Error }} {{ .Icon }} {{ .Percentage }}\uF295 {{ end }}"
        style: powerline
        powerline_symbol: 
        invert_powerline: true
      - type: node
        background: "#303030"
        foreground: "#3C873A"
        properties:
          fetch_package_manager: true
          npm_icon: "<#cc3a3a></>"
          template: "\
             {{ if .PackageManagerIcon }}{{ .PackageManagerIcon }} {{ end }}{{ .Full }}\
            "
          yarn_icon: "<#348cba></>"
        style: powerline
        powerline_symbol: 
        invert_powerline: true
      - type: php
        background: "#787CB5"
        foreground: "#000000"
        properties:
          template:  {{ if .Error }}{{ .Error }}{{ else }}{{ .Full }}{{ end }}
        style: powerline
        powerline_symbol: 
        invert_powerline: true
      - type: dotnet
        background: "#0e0e0e"
        foreground: "#0d6da8"
        properties:
          template: " {{ if .Unsupported }}{{ else }}{{ .Full }}{{ end }}"
        style: powerline
        powerline_symbol: 
        invert_powerline: true
      - type: go
        background: "#ffffff"
        foreground: "#06aad5"
        properties:
          template: "ﳑ {{ if .Error }}{{ .Error }}{{ else }}{{ .Full }}{{ end }}"
        style: powerline
        powerline_symbol: 
        invert_powerline: true
      - type: ruby
        background: "#ffffff"
        foreground: "#9c1006"
        properties:
          template: " {{ if .Error }}{{ .Error }}{{ else }}{{ .Full }}{{ end }}"
        style: powerline
        powerline_symbol: 
        invert_powerline: true
      - type: executiontime
        background: "p:dark-blue"
        foreground: "p:white"
        leading_diamond: 
        trailing_diamond: <transparent,p:dark-blue></>
        properties:
          style: roundrock
          template: "{{ .FormattedMs }}"
          threshold: 0
        style: powerline
        powerline_symbol: 
        invert_powerline: true
      - type: shell
        background: "#d6deeb"
        foreground: "#011627"
        properties:
          template: " {{ .Name }}"
        style: powerline
        powerline_symbol: 
        invert_powerline: true
      - type: time
        background: "p:blue"
        foreground: "p:white"
        properties:
          template: ' {{ .CurrentDate | date "15:04:05" }}'
          time_format: 15:04:05
        style: diamond
        leading_diamond: ""
        trailing_diamond: "<p:blue,transparent></>"
        invert_powerline: true
  - alignment: left
    type: prompt
    newline: true
    segments:
      - type: exit
        foreground: "p:green"
        foreground_templates:
          - "{{ if gt .Code 0 }}p:red{{ end }}"
        properties:
          always_enabled: true
          template: ""
          prefix: ""
          postfix: " "
        style: plain
      - type: text
        foreground: "p:white"
        foreground_templates:
          - "{{ if .Root }}p:light-red{{ end }}"
        properties:
          template: "{{ if .Root }}#{{ else }}${{ end }} "
          prefix: ""
          postfix: ""
        style: plain
console_title: true
console_title_style: template
console_title_template: "[{{.UserName}}@{{.HostName}} {{.PWD}}] {{ if .Root }}#{{ else }}${{ end }} {{.Shell}}"
osc99: true
transient_prompt:
  background: transparent
  foreground: "p:white"
  template: "[{{.UserName}}@{{.HostName}} {{.PWD}}] {{ if .Root }}#{{ else }}${{ end }} "
version: 1
